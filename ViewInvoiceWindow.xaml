<Window x:Class="NewCustomerWindow.xaml.ViewInvoiceWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Invoice"
        Height="800" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="White">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <StackPanel>
                <!-- Company Info -->
                <TextBlock Text="AARVI ENTERPRISES"
                           FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
                <TextBlock Text="Waghbil, Thane, Maharashtra"
                           FontSize="14" HorizontalAlignment="Center"/>
                <TextBlock Text="Phone: +91-9987064748"
                           FontSize="14" HorizontalAlignment="Center"/>
                <TextBlock Text="Email: aarvienterprises@gmail.com"
                           FontSize="14" HorizontalAlignment="Center"/>
                <Separator Margin="0,10,0,10"/>

                <!-- Invoice Header -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="10">
                        <TextBlock Text="Bill To:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding CustomerName}" />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="10">
                        <TextBlock Text="Invoice No:" FontWeight="Bold"/>
                        <TextBlock Text="{Binding InvoiceId}" />
                        <TextBlock Text="Date:" FontWeight="Bold" Margin="0,10,0,0"/>
                        <TextBlock Text="{Binding InvoiceDate, StringFormat=d}" />
                    </StackPanel>
                </Grid>

                <Separator Margin="0,10,0,10"/>

                <!-- Common Invoice Fields -->
                <Grid Margin="0,0,0,10">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Type:" FontWeight="Bold"/>
                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding InvoiceType}"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Description:" FontWeight="Bold"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Description}" TextWrapping="Wrap"/>

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Amount:" FontWeight="Bold"/>
                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Amount, StringFormat=₹{0:N2}}"/>

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Status:" FontWeight="Bold"/>
                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding Status}"/>
                </Grid>

                <Separator Margin="0,10,0,10"/>

                <!-- Water Supply Details (visible only if WaterDetails != null) -->
                <StackPanel Margin="0,0,0,10">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding WaterDetails}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>

                    <TextBlock Text="Water Supply Details"
                               FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>

                    <TextBlock Text="Brand:" FontWeight="Bold"/>
                    <TextBlock Text="{Binding WaterDetails.Brand, TargetNullValue=-, FallbackValue=-}"/>

                    <TextBlock Text="Quantity:" FontWeight="Bold" Margin="0,5,0,0"/>
                    <TextBlock Text="{Binding WaterDetails.Quantity, TargetNullValue=-, FallbackValue=-}"/>

                    <TextBlock Text="Units:" FontWeight="Bold" Margin="0,5,0,0"/>
                    <TextBlock Text="{Binding WaterDetails.Units, TargetNullValue=-, FallbackValue=-}"/>

                    <TextBlock Text="Address:" FontWeight="Bold" Margin="0,5,0,0"/>
                    <TextBlock Text="{Binding WaterDetails.Address, TargetNullValue=-, FallbackValue=-}"
                               TextWrapping="Wrap"/>
                </StackPanel>

                <Separator Margin="0,10,0,10"/>

                <!-- Actions -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Download PDF"
                            Width="120" Height="30" Margin="0,0,10,0"
                            Click="DownloadPdf_Click"
                            Background="#3498db" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
                    <Button Content="Close"
                            Width="100" Height="30"
                            Click="Close_Click"
                            Background="#e74c3c" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
